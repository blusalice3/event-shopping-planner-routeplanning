# 即売会購入巡回表アプリ

即売会（コミケ、コミティアなど）での購入リストを管理するWebアプリケーションです。タブレットやスマートフォンで使用でき、オフラインでも動作します。

## 🚀 クイックスタート

### セットアップ

```bash
npm install
npm run dev
```

ブラウザで `http://localhost:5173` を開きます。

### ビルド

```bash
npm run build
```

## 📱 主な画面と表示内容

### 1. 即売会リスト画面
- 保存済みの即売会リストが一覧表示されます
- リストをタップして開く
- リストを**長押し**（500ms）でメニュー表示：
  - 🔄 アイテム更新：スプレッドシートから最新データを取得
  - ✏️ 名前変更
  - 📥 Excel形式で出力：CSVファイルをダウンロード
  - 🗑️ 削除

### 2. 新規リスト作成画面
**インポート方法（3種類）**

#### 方法1: スプレッドシートURLからインポート
- GoogleスプレッドシートのURLを入力
- ⚠️ **重要**: スプレッドシートは「リンクを知っている全員が閲覧可」に設定
- シート名「品目表」のM列～R列、W列を自動インポート

#### 方法2: CSVファイルからインポート
- ローカルのCSVファイルをアップロード
- A列～D列が全て入力されている行のみインポート

#### 方法3: 手動入力
- スプレッドシートのM列～R列、W列をコピーして「サークル名」欄に貼り付け
- タブ区切りで自動的に各欄に振り分けられます

### 3. 購入リスト画面

#### 画面構成
- **ヘッダー**: 即売会名、参加日タブ（1日目、2日目など）
- **アイテムカード**: 各購入アイテムの情報を表示
- **サマリーバー**: 購入済み件数と残りの合計金額

#### アイテムカードの表示内容
- **左側**: チェックボックス、上下移動ボタン、ドラッグハンドル
- **中央**: 
  - 参加日とブロック-ナンバー（例: 「1日目 G-01a」）
  - サークル名
  - タイトル
  - 備考欄（編集可能）
- **右側**: 
  - 購入状態ボタン（6つの状態を切り替え）
  - 価格表示

#### 購入状態の表示
| 状態 | アイコン | 色 |
|------|---------|-----|
| 未購入 | 灰色の円 | ブロックごとの色分け |
| 購入済 | 緑色のチェック | 緑色背景 |
| 売切 | 赤色の× | 赤色背景 |
| 欠席 | 黄色のマイナス | 黄色背景 |
| 後回し | 紫色の一時停止 | 紫色背景 |
| 遅参 | 青色の時計 | 青色背景 |

#### 色分け表示
- **ブロック色**: 未購入アイテムはブロック値ごとに異なる色で表示
- **状態色**: 購入済み・売切などの状態は背景色で識別
- **縞模様**: 同じブロックのアイテムが隣り合う場合、濃淡が交互に表示

## 🎯 基本的な使い方

### 編集モード（事前計画）

1. 参加日のタブを**長押し**（500ms）して編集モードに切り替え
2. **2列表示**になります：
   - **左列（実行モード表示列）**: 当日購入するアイテム
   - **右列（候補リスト）**: 候補となるアイテム
3. 候補リストから購入したいアイテムを選択（チェックボックスで複数選択可能）
4. ヘッダーの「選択したアイテムを左列に移動」ボタンをクリック
5. 左列でアイテムの順序をドラッグ&ドロップで調整
6. ブロックフィルタで特定のブロックのみ表示可能
7. ナンバー順にソート可能

### 実行モード（当日使用）

1. 参加日のタブを**長押し**（500ms）して実行モードに切り替え
2. **1列表示**になります（左列のアイテムのみ表示）
3. 各アイテムの購入状態ボタンをタップして状態を変更
4. ヘッダーのソートボタンで状態別にフィルタリング
5. 下部のサマリーバーで購入済み件数と残りの合計金額を確認

### その他の操作

- **アイテムの編集**: アイテムを長押しして「編集」を選択
- **アイテムの削除**: アイテムを長押しして「削除」を選択
- **順序の変更**: ドラッグ&ドロップまたは上下移動ボタン
- **ズーム**: 画面左下のズームコントロール（30%～150%）

## 📊 データ形式

### スプレッドシート形式（M列から始まる）
- M列: サークル名
- N列: 参加日（例: 1日目、2日目）
- O列: ブロック（例: A、G）
- P列: ナンバー（例: 01a、03a）
- Q列: タイトル
- R列: 頒布価格（数値）
- W列: 備考

### CSVエクスポート形式（A列から始まる）
- A列: サークル名
- B列: 参加日
- C列: ブロック
- D列: ナンバー
- E列: タイトル
- F列: 頒布価格
- G列: 購入状態
- H列: 備考
- I列: 列の種類（実行列/候補リスト）
- J列: 列内順番

## 💾 データ管理

- すべてのデータはブラウザの**localStorage**に自動保存されます
- サーバーには送信されません（プライバシー保護）
- ページをリロードしても状態が保持されます
- 定期的にCSV形式でエクスポートしてバックアップすることを推奨します

## ⚠️ 注意事項

- データはブラウザのローカルストレージに保存されます
- ブラウザのデータを削除すると、保存されたデータも失われます
- スプレッドシートは公開設定（「リンクを知っている全員が閲覧可」）にする必要があります
- 定期的なCSVエクスポートによるバックアップを推奨します

## 📝 技術スタック

- React 18
- TypeScript
- Vite
- PWA対応（オフライン動作可能）
